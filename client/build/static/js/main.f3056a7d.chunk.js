(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{177:function(e,t,r){},182:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),s=r(10),a=r.n(s),i=(r(95),r(17)),c=r(68),u=r(232),d=r(213),l=r(215),h=r(11),m=r(111),j=Object(m.io)({autoConnect:!1}),p=r(2),b=Object(d.a)((function(e){return{button:{background:"#74b816",color:"white",width:"100%",fontSize:20,margin:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"84%"}}})),f=function(e){var t=e.username,r=e.setInvalidUsername,o=b(),s=Object(h.f)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),d=c[0],m=c[1],f=Object(n.useState)(!1),g=Object(i.a)(f,2),O=g[0],x=g[1],v=Object(n.useState)(!1),C=Object(i.a)(v,2),y=C[0],w=C[1];Object(n.useEffect)((function(){j.connect()}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.a,{variant:"contained",className:o.button,onClick:function(e){e.preventDefault(),""===t?r(!0):(r(!1),x(!O))},children:"Join a session"}),O?Object(p.jsxs)("div",{style:{marginBottom:10,width:"100%"},children:[Object(p.jsx)(u.a,{label:"Classroom code",id:"margin-normal",name:"name",className:o.textField,onChange:function(e){m(e.target.value)},style:{width:"60%"},helperText:y?"Please enter a valid classroom code":"",error:y}),Object(p.jsx)(l.a,{type:"submit",variant:"contained",color:"default",onClick:function(e){e.preventDefault(),""===d?w(!0):(w(!1),j.emit("userLogin",{roomCode:d.toLowerCase().trim(),username:t},(function(e){var t=e.error,r=e.user;t?alert(t):s.push("/room/".concat(d),{isHost:!1,user:r})})))},style:{marginTop:"10px",marginLeft:"50px",width:"20%",backgroundColor:"#d6336c",color:"white"},children:"Enter"})]}):null]})},g=Object(d.a)((function(e){return{button:{background:"#f76705",color:"white",width:"100%",fontSize:20,margin:e.spacing(1)}}})),O=function(e){var t=e.username,r=e.setInvalidUsername,o=g(),s=Object(h.f)();Object(n.useEffect)((function(){j.connect(),j.once("create",(function(e){var t=e.roomCode,r=e.host;s.push("/room/".concat(t),{isHost:!0,user:r})}))}),[t]);var a=function(){j.emit("create",{username:t})};return Object(p.jsx)(l.a,{variant:"contained",className:o.button,onClick:function(){""===t?r(!0):(r(!1),a())},children:"Create a new session"})},x=Object(d.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(2),width:"100%"}}})),v=function(e){var t=e.setUsername,r=e.invalidUsername,o=x();return Object(n.useEffect)((function(){j.connect()}),[]),Object(p.jsx)(u.a,{label:"Username",id:"margin-normal",name:"name",className:o.textField,onChange:function(e){t(e.target.value)},helperText:r?"Please enter a username":"",error:r})},C=r(222),y=function(){return Object(p.jsxs)("div",{className:"fixed-bottom",style:{paddingTop:"70px"},children:[Object(p.jsx)(C.a,{variant:"body1",align:"center",gutterBottom:!0,children:"A whiteboard for a fun and interactive classroom experience"}),Object(p.jsx)(C.a,{variant:"body2",align:"center",children:"\ud83e\udd9a Made for Lifehack 2021 \ud83e\udd9a"})]})},w=r(230),I=r(223),S=r(185),D=r.p+"static/media/pavo_logo.aaa927f9.svg",k=r(116),U=r.p+"static/media/peacockSound.72d272aa.m4a",N=Object(d.a)((function(e){return{paper:Object(c.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)})}})),E=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),r=t[0],o=t[1],s=Object(n.useState)(!1),a=Object(i.a)(s,2),c=a[0],u=a[1],d=Object(k.a)(U),l=Object(i.a)(d,1)[0],h=N();return Object(p.jsxs)(w.a,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",flexDirection:"column",children:[Object(p.jsx)(I.a,{in:!0,children:Object(p.jsxs)(S.a,{elevation:2,className:h.paper,children:[Object(p.jsx)("img",{src:D,alt:"Peacock!",onClick:function(e){return function(e){5===e.detail&&l()}(e)},style:{width:"400px",height:"300px"}}),Object(p.jsx)(v,{setUsername:o,invalidUsername:c}),Object(p.jsx)(f,{username:r,setInvalidUsername:u}),Object(p.jsx)(O,{username:r,setInvalidUsername:u})]})}),Object(p.jsx)(y,{})]})},F=r(224),R=r(118),z=r.n(R),H=(r(177),r(234)),L=Object(d.a)((function(e){return{button:{background:"#d6336c",color:"white",height:70,width:400,fontSize:30,margin:e.spacing(3)}}})),B=function(e){var t=e.isHost,r=e.roomHost,n=e.roomCode,o=(e.users,e.content),s=e.currentUser,a=L();return Object(p.jsxs)("div",{className:"waitingRoom",children:[Object(p.jsxs)(C.a,{variant:"h2",style:{margin:10},children:["You are in room ",n]}),Object(p.jsxs)("div",{className:"waitingRoom__content",children:[Object(p.jsxs)(S.a,{className:"leader waitingRoom__paper",elevation:3,children:[Object(p.jsx)(C.a,{variant:"h3",style:{margin:10},children:"Session Leader"}),Object(p.jsx)("img",{src:D,alt:"logo",style:{width:"50%",minWidth:"50%"}}),Object(p.jsxs)(C.a,{variant:"h3",children:[" ",r.username," "]})]}),Object(p.jsxs)(S.a,{className:"users waitingRoom__paper",elevation:3,children:[Object(p.jsx)(C.a,{variant:"h6",align:"center",children:"Users"}),Object(p.jsx)(C.a,{variant:"body1",align:"center",style:{width:"60%"},children:Object(p.jsx)("ol",{children:o.length>0&&o.map(function(e){return function(t){return Object(p.jsxs)("li",{children:[r.username===t.username?r.username+" [Host]":t.username,e&&t.userID!==s.userID&&Object(p.jsx)(H.a,{title:"Kick user from room",children:Object(p.jsx)(F.a,{edge:"end",onClick:function(){return function(e){j.emit("remove-user",{user:e,roomCode:n})}(t)},children:Object(p.jsx)(z.a,{})})})]})}}(t))})})]})]}),t&&Object(p.jsx)(l.a,{type:"submit",variant:"contained",color:"default",size:"large",className:a.button,onClick:function(){j.emit("startSession",n)},children:"Start session"}),!t&&Object(p.jsx)(C.a,{variant:"h6",className:"loading",children:"Waiting for host to start meeting"}),Object(p.jsx)(y,{})]})},T=r(120),W=r(61),_=r(74),P=r(75),M=r(77),q=r(76),J=r(60),V=r(225),G=function(e){Object(M.a)(r,e);var t=Object(q.a)(r);function r(e){var n;return Object(_.a)(this,r),(n=t.call(this,e)).isDrawing=!1,n.clearWhiteboard=function(){var e=document.getElementById("board-".concat(n.props.roomCode,"-").concat(n.props.user.userID));e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),j.emit("clear",{roomCode:n.props.roomCode,user:n.props.user}))},n.state={shared:!1},j.on("canvas-data",(function(t){if(0===t.roomCode.localeCompare(e.roomCode)&&0===t.user.userID.localeCompare(e.user.userID))var r=this,n=setInterval((function(){if(!r.isDrawing){r.isDrawing=!0,clearInterval(n);var o=new Image,s=document.querySelector("#board-".concat(e.roomCode,"-").concat(e.user.userID));if(s){var a=s.getContext("2d");o.onload=function(){a.drawImage(o,0,0),r.isDrawing=!1},o.src=t.image}}}),200)})),j.on("clear",(function(t){if(t.roomCode===e.roomCode&&t.user.userID===e.user.userID){var r=document.getElementById("board-".concat(n.props.roomCode,"-").concat(n.props.user.userID));if(!r)return;r.getContext("2d").clearRect(0,0,r.width,r.height)}})),j.on("get-whiteboards",(function(t){if(t.roomCode===e.roomCode&&t.user.userID!==e.user.userID&&e.currentUser.userID!==t.user.userID){var r=document.querySelector("#board-".concat(n.props.roomCode,"-").concat(n.props.user.userID));if(!r)return;var o=r.toDataURL("image/png");j.emit("canvas-data",{image:o,roomCode:n.props.roomCode,user:n.props.user})}})),n.handleShare=n.handleShare.bind(Object(J.a)(n)),n.stopShare=n.stopShare.bind(Object(J.a)(n)),n}return Object(P.a)(r,[{key:"componentDidMount",value:function(){this.drawOnCanvas(),this.initialiseImage()}},{key:"componentWillReceiveProps",value:function(e){this.ctx.strokeStyle=e.eraseMode?"#FFFFFF":e.color,this.ctx.lineWidth=e.size}},{key:"drawOnCanvas",value:function(){var e=document.querySelector("#board-".concat(this.props.roomCode,"-").concat(this.props.user.userID));if(e){this.ctx=e.getContext("2d");var t=this.ctx,r=document.querySelector("#sketch-".concat(this.props.roomCode,"-").concat(this.props.user.userID)),n=getComputedStyle(r);e.width=parseInt(n.getPropertyValue("width")),e.height=parseInt(n.getPropertyValue("height"));var o={x:0,y:0},s={x:0,y:0};e.addEventListener("mousemove",(function(e){s.x=o.x,s.y=o.y,o.x=e.pageX-this.offsetLeft,o.y=e.pageY-this.offsetTop}),!1),t.lineWidth=this.props.size,t.lineJoin="round",t.lineCap="round",t.strokeStyle=this.props.eraseMode?"#FFFFFF":this.props.color,e.addEventListener("mousedown",(function(t){e.addEventListener("mousemove",i,!1)}),!1),e.addEventListener("mouseup",(function(){e.removeEventListener("mousemove",i,!1)}),!1);var a=this,i=function(){t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(o.x,o.y),t.closePath(),t.stroke(),void 0!=a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout((function(){var t=e.toDataURL("image/png");j.emit("canvas-data",{image:t,roomCode:a.props.roomCode,user:a.props.user})}),1e3)}}}},{key:"handleShare",value:function(){var e=document.querySelector("#board-".concat(this.props.roomCode,"-").concat(this.props.user.userID));if(e){var t=e.toDataURL("image/png");j.emit("share-whiteboard",{image:t,roomCode:this.props.roomCode,user:this.props.user}),this.setState({shared:!0})}}},{key:"stopShare",value:function(){j.emit("stop-share",{roomCode:this.props.roomCode,user:this.props.user}),this.setState({shared:!1})}},{key:"initialiseImage",value:function(){if(this.props.image){var e=new Image,t=document.getElementById("board-".concat(this.props.roomCode,"-").concat(this.props.user.userID));if(!t)return null;var r=t.getContext("2d");e.onload=function(){r.drawImage(e,0,0)},e.src=this.props.image}var n=document.getElementById("board-".concat(this.props.roomCode,"-").concat(this.props.user.userID));(r=n.getContext("2d")).fillStyle="white",r.fillRect(0,0,n.width,n.height)}},{key:"render",value:function(){return Object(p.jsxs)(V.a,{item:!0,xs:12,children:[Object(p.jsx)(C.a,{variant:"h5",children:this.props.user?this.props.user.username:""}),this.state.shared?Object(p.jsx)(l.a,{onClick:this.stopShare,children:"Stop sharing whiteboard"}):Object(p.jsx)(l.a,{onClick:this.handleShare,children:"Share whiteboard"}),Object(p.jsx)(l.a,{onClick:this.clearWhiteboard.bind(this),children:"Clear whiteboard"}),Object(p.jsx)("div",{class:"sketch",id:"sketch-".concat(this.props.roomCode,"-").concat(this.props.user.userID),children:Object(p.jsx)("canvas",{className:"board",id:"board-".concat(this.props.roomCode,"-").concat(this.props.user.userID),style:{border:"1px solid #000000"},width:"800",height:"800"})})]})}}]),r}(o.a.Component),Y=r(221),A=r(186),K=r(231),Q=r(226),X=function(e){return function(t){return Object(p.jsx)(V.a,{container:!0,spacing:2,justifyContent:"flex-start",children:Object(p.jsx)(G,{color:e.state.color,size:e.state.size,roomCode:e.props.roomCode,user:t.user,image:t.image,eraseMode:e.state.erase,currentUser:e.props.currentUser})})}},Z=function(e){Object(M.a)(r,e);var t=Object(q.a)(r);function r(e){var n;return Object(_.a)(this,r),(n=t.call(this,e)).changeEraseMode=function(){n.setState(Object(W.a)(Object(W.a)({},n.state),{},{erase:!n.state.erase}))},n.state={color:"#000000",size:"5",erase:!1},n}return Object(P.a)(r,[{key:"changeColor",value:function(e){this.setState({color:e.target.value})}},{key:"changeSize",value:function(e){this.setState({size:e.target.value})}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(V.a,{container:!0,spacing:2,alignItems:"center",children:[Object(p.jsx)(V.a,{item:!0,xs:1,className:"userPalette",children:Object(p.jsx)("div",{style:{border:"1px solid #000000",justifyContent:"center"},children:Object(p.jsxs)(Y.a,{children:[Object(p.jsx)(A.a,{children:Object(p.jsxs)("div",{className:"color-picker-container",children:[Object(p.jsx)(C.a,{variant:"body1",children:"Brush Color"}),Object(p.jsx)("input",{type:"color",value:this.state.color,onChange:this.changeColor.bind(this)})]})}),Object(p.jsx)(A.a,{children:Object(p.jsxs)("div",{className:"brushsize-container",children:[Object(p.jsx)(C.a,{variant:"body1",children:"Brush Size"}),Object(p.jsxs)(K.a,{value:this.state.size,onChange:this.changeSize.bind(this),children:[Object(p.jsx)(Q.a,{value:5,children:" 5 "}),Object(p.jsx)(Q.a,{value:10,children:" 10 "}),Object(p.jsx)(Q.a,{value:15,children:" 15 "}),Object(p.jsx)(Q.a,{value:20,children:" 20 "}),Object(p.jsx)(Q.a,{value:25,children:" 25 "}),Object(p.jsx)(Q.a,{value:30,children:" 30 "})]})]})}),Object(p.jsx)(A.a,{children:Object(p.jsx)(l.a,{onClick:this.changeEraseMode.bind(this),children:this.state.erase?"Stop erasing":"Erase"})}),Object(p.jsx)(A.a,{children:this.props.isHost&&Object(p.jsx)(l.a,{onClick:function(){e.state.focus&&j.emit("get-whiteboards",{roomCode:e.props.roomCode,user:e.props.currentUser}),e.setState(Object(W.a)(Object(W.a)({},e.state),{},{focus:!e.state.focus}))},children:this.state.focus?"View all":"View yours"})})]})})}),Object(p.jsxs)(V.a,{item:!0,xs:11,className:"boards",children:[!this.props.isHost&&this.props.shareWhiteboards.map(X(this)),X(this)({user:this.props.currentUser}),this.props.isHost&&!this.state.focus&&this.props.content.map(X(this))]})]})}}]),r}(o.a.Component),$=r(227),ee=r(228),te=Object(d.a)((function(e){return{icon:{color:"#ff5138",marginRight:e.spacing(2)},root:{flexGrow:1,marginBottom:e.spacing(1)},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),re=function(){var e=Object(h.f)(),t=te();return Object(p.jsx)("div",{className:t.root,children:Object(p.jsx)($.a,{position:"relative",style:{backgroundColor:"#f3f5f8"},elevation:1,children:Object(p.jsx)(ee.a,{children:Object(p.jsx)("img",{src:D,style:{maxWidth:50},className:"img",onClick:function(){window.confirm("Do you want to go home?")&&e.push("/")}})})})})},ne=function(e){var t=e.isHost,r=e.roomCode,o=e.content,s=e.currentUser,a=Object(n.useState)([]),c=Object(i.a)(a,2),u=c[0],d=c[1];j.on("share-whiteboard",(function(e){-1===u.findIndex((function(t){return t.roomCode===e.roomCode&&t.user.userID===e.user.userID}))&&e.roomCode===r&&e.user.userID!==s.userID&&d([].concat(Object(T.a)(u),[e]))})),j.on("stop-share",(function(e){if(-1!==u.findIndex((function(t){return t.roomCode===e.roomCode&&t.user.userID===e.user.userID}))&&e.userID!==s.username){var t=u.filter((function(t){return t.roomCode!==e.roomCode||t.username!==e.username}));d(t)}}));var l=o.filter((function(e){return e.userID!==s.userID})).map((function(e){return{user:{userID:e.userID,username:e.username}}}));return Object(p.jsxs)(V.a,{container:!0,children:[Object(p.jsx)(V.a,{item:!0,xs:12,children:Object(p.jsx)(re,{})}),Object(p.jsx)(V.a,{}),Object(p.jsx)(V.a,{item:!0,xs:11,children:Object(p.jsx)(Z,{isHost:t,roomCode:r,currentUser:s,shareWhiteboards:u,content:l})})]})},oe=function(){var e=window.location.href.split("/").slice(-1)[0],t=Object(n.useState)(1),r=Object(i.a)(t,2),o=r[0],s=r[1],a=Object(n.useState)({users:[]}),c=Object(i.a)(a,2),u=c[0],d=c[1],l=Object(n.useState)(!1),m=Object(i.a)(l,2),b=m[0],f=m[1],g=Object(n.useState)({}),O=Object(i.a)(g,2),x=O[0],v=O[1],C=Object(h.g)(),y=C.state.isHost,w=C.state.user,I=Object(h.f)();return window.onbeforeunload=function(){j.emit("leave",w)},Object(n.useEffect)((function(){j.connect(),j.emit("userJoinedRoom",{roomCode:e,user:w},(function(e){var t=e.started;f(t)})),j.on("update_user",(function(e){s(e.users.length),d(e.users),v(e.roomHost),0!==w.username.length&&-1===e.users.findIndex((function(e){return e.userID===w.userID}))&&(I.push("/"),alert("Sorry, you have been removed by the host"))})),j.on("update_session_start",(function(e){f(e.start)}))}),[]),b?Object(p.jsx)(ne,{isHost:y,roomCode:e,content:u,currentUser:w}):Object(p.jsx)(B,{isHost:y,roomHost:x,roomCode:e,users:o,content:u,currentUser:w})},se=r(65),ae=r(119),ie=r(229),ce=Object(ae.a)({typography:{fontFamily:"Quicksand",fontWeightRegular:500,body1:{fontSize:"1.1rem"}}});var ue=function(){return Object(p.jsx)(ie.a,{theme:ce,children:Object(p.jsx)(se.a,{children:Object(p.jsxs)(h.c,{children:[Object(p.jsx)(h.a,{exact:!0,path:"/",component:E}),Object(p.jsx)(h.a,{path:"/room/:roomCode",component:oe})]})})})};a.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(ue,{})}),document.getElementById("root"))},95:function(e,t,r){}},[[182,1,2]]]);
//# sourceMappingURL=main.f3056a7d.chunk.js.map